# Microblog
Microblog web application supporting public communications and private messaging between its users.

This application is developed based on Miguel's Grinberg Flask [tutorial](https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world) as a self-educational pet-project.


## Description and features
Application allows users to write public posts and private messages and view other users' posts, messages and profiles with additional information.

Here is the list of main application features implemented:
* Registration
* Main page contains the posts of all users followed by a current user and the text form to write own posts.
* Explore page contains ALL microblog posts from all users.
* Search form in Application header to search posts by its body.
* Messages page containing user's private messages from other users.
* User profile page. This page could be accessed through any user's post and message. User profile page includes Follow/Unfollow buttons, all user's public posts, "send private message" button and basic user info (user's autogenerated avatar, last seen, user nickname, user description, number of followers/followed). Self profile page includes edit option and "Export your posts" option.
* Upon clicking on "Export your posts" button your public posts would be serialized and send to the email you provided during registration.
* Application allows user to reset password using email provided during registration email if needed.
* Application partially covered by Babel for further translation.
* Automated posts translate to user native language function.
* REST API with token based authorization for most application public entities: `app.api.v1`

## Quick start
Getting started with microblog base functionality should be fast and easy. Here are the steps:
1. Clone this repo: https://github.com/MaDITIY/microblog.git
2. Open cloned directory.
3. Create new virtualenv:

    ```python3 -m venv venv```

4. Activate virtualenv:

    ```source ./venv/bin/activate```

5. Install packages:

    ```pip install -r requirements.txt```

### Launch microblog
[From root directory under activated venv. Make sure RDMS running.]

```flask run --host 0.0.0.0 --port 8080```

### Accessing microblog
Application is now accessible on <http://localhost:8080/>


### Extra features prerequisites:
* One of RDMS server running locally (`PostgreSQL`, `MySQL` or `SQLite`). Env vars:
```shell
SQLALCHEMY_DATABASE_URI="<your-connection-url>"
```
* `Elasticsearch` (`8.7.1` or later) for global search functionality. Env vars:
```shell
ELASTICSEARCH_URL="<your-connection-url>"
```
* `Reddis Queue` with workers for profile export functionality. Env vars:
```shell
REDIS_URL="<your-connection-url>"
```
* `Microsoft Translator` created in `Microsoft Azure Cloud` for posts automatic native language translate functionality
```shell
LANGUAGES="<comma-separated-language-codes>"
APP_TRANSLATOR="ms_translator"
MS_TRANSLATOR_KEY="<microsoft-translator-key>"
MS_TRANSLATOR_LOCATION="<ms-translator-location>"
```
* SMTP server configured to send password reset main and profile export mail
```shell
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=465
MAIL_USE_SSL=1
MAIL_USE_TLS=0
MAIL_USERNAME="<your-email-address>"
MAIL_PASSWORD="<mail-app-password>"
```

## App locales introduction and configuration.
Microblog is partially written babel-formatted so multiple localizations could be added.

### Improved CLI
Microblog application has improved CLI to build, rebuild and compile localizations.
Example usage for Spanish localization:
```shell
flask translate init es

flask translate update # To update in case of modification.

flask translate compile # To compile completed localization.
```

## Next steps and action items
* Complete application API and models business logic coverage with tests. 
* Implement dialogues views (separated for each user, with both users' and your private messages separated for each user)
* Complete API application representation (Posts entities. Follow/unfollow functions.)

## Environment, technologies and third-party tools used
* Python 3.10
* Flask
* SQLAlchemy
* PostgreSQL
* Alembic
* Redis Queue
* Microsoft Azure Cloud: Microsoft Translator
* Babel
* Bootstrap
* jQuery